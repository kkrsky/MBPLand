<!--<script src="https://cdn.jsdelivr.net/npm/vue@2.5.17/dist/vue.js"></script>-->
<script src="https://cdn.jsdelivr.net/npm/vue@2.x/dist/vue.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.js"></script>
<script src="https://unpkg.com/vue-router/dist/vue-router.js"></script>
<script src="https://unpkg.com/vuex"></script>
<script src="https://cdn.jsdelivr.net/npm/es6-promise@4/dist/es6-promise.auto.js"></script>

<script>
  google.script.run.withSuccessHandler(initializeVue).getSpreadsheetName();
  let global = {
    gas: "",
  };
  var page1 = "<div>ページ１を表示</div>";
  var page2 = "<div>ページ２を表示</div>";
  var home = "<div>home</div>";
  var settings = "<div>settings</div>";
  var about = "<div>about</div>";
  var login = "<div>login</div>";
  var test = "<div>test</div>";
  function initGlobalData(data) {
    global.gas = JSON.parse(data);
  }
  function initializeVue(ssName) {
    new Vue({
      el: "#app",
      vuetify: new Vuetify(),
      router: new VueRouter({
        mode: "history",
        // base:'/app/public/',
        routes: [
          {
            path: "/",
            component: {
              template: home,
            },
          },
          {
            path: "/test",
            component: {
              template: test,
            },
          },
          {
            path: "/settings",
            component: {
              template: settings,
            },
          },
          {
            path: "/about",
            component: {
              template: about,
            },
          },
          {
            path: "/login",
            component: {
              template: login,
            },
          },
          {
            path: "/page1",
            component: {
              template: page1,
            },
          },
          {
            path: "/page2",
            component: {
              template: page2,
            },
          },
        ],
      }),
      store: new Vuex.Store({
        state: {
          count: 0,
          user: "",
        },
        mutations: {
          increment(state) {
            state.count++;
          },
          user: (state, payload) => (state.user = payload),
        },
      }),
      data: {
        ssName: ssName,
        leftMiniVariant: false,
        leftDrawer: false,
        rightDrawer: false,
        selectedItem: 1,
        leftDrowerList: [
          {
            id: 0,
            text: "全体のお知らせ",
            icon: "mdi-newspaper",
            goto: "/",
            isShow: true,
          },
          {
            id: 1,
            text: "みんなのおかねのやりとり",
            icon: "mdi-credit-card-multiple",
            goto: "/",
            isShow: true,
          },
          {
            id: 2,
            text: "あなたのおかねのやりとり",
            icon: "mdi-credit-card",
            goto: "/",
            isShow: true,
          },
          {
            id: 3,
            text: "支払いリスト",
            icon: "mdi-export",
            goto: "/",
            isShow: true,
          },
          {
            id: 4,
            text: "請求リスト",
            icon: "mdi-import",
            goto: "/",
            isShow: true,
          },
          {
            id: 5,
            text: "請求を追加",
            icon: "mdi-import",
            goto: "/",
            isShow: true,
          },
          {
            id: 6,
            text: "設定",
            icon: "mdi-settings",
            goto: "settings",
            isShow: true,
          },
          {
            id: 7,
            text: "テスト",
            icon: "mdi-flag",
            goto: "test",
            isShow: true,
          },
        ],
      },
      methods: {
        test2(item) {
          console.log("2", global);
        },
        changeMessage: function () {
          this.ssName = "Hello JavaScript!";
        },
        findDisplayPageById(id) {
          return this.leftDrowerList.find((list) => {
            return list.id === id;
          });
        },
        isShowDisplayById(id) {
          console.log(this.findDisplayPageById(id).isShow);
          return this.findDisplayPageById(id).isShow;
        },
      },
    });
  }
  // var app = new Vue({
  //   el: "#app",
  //   data: {
  //     message: "Hello GAS!",
  //   },
  //   methods: {
  //     changeMessage: function () {
  //       this.message = "Hello JavaScript!";
  //     },
  //   },
  //});
</script>
